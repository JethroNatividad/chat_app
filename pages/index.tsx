import { onAuthStateChanged } from "firebase/auth";
import type { NextPage } from "next";
import Head from "next/head";
import { useRouter } from "next/router";
import { useEffect, useState } from "react";
import ChatView from "../components/ChatView";
import Menu from "../components/Menu";
import { auth } from "../lib/firebase";
import { Button } from "@chakra-ui/react";
import { useAuth } from "../context/AuthContext";
const Home: NextPage = () => {
	// const [openChatGroupId, setOpenChatGroupId] = useState<string | null>(null)
	const { logout } = useAuth();

	return (
		<div>
			<Head>
				<title>Chat App</title>
				<meta name="description" content="Generated by create next app" />
				<link rel="icon" href="/favicon.ico" />
			</Head>

			<main className="h-screen flex">
				<div
					className={`w-full md:w-1/3 h-full md:relative fixed z-10 top-0 left-0 transition-transform duration-300 ${
						null !== null ? "-translate-x-full" : "translate-x-0"
					} md:translate-x-0`}
				>
					<Button onClick={logout}>Logout</Button>
					{/* <Menu openChatGroupId={openChatGroupId} setOpenChatGroupId={setOpenChatGroupId} /> */}
					<Menu />
				</div>
				<div
					className={`flex-1 w-full h-full md:relative fixed z-10 top-0 left-0 transition-transform duration-300 ${
						null !== null ? "translate-x-0" : "translate-x-full"
					} md:translate-x-0`}
				>
					{null === null ? (
						<div className="h-full w-full bg-primary-dark flex items-center justify-center">
							<h1 className="text-white text-lg font-semibold">
								Open or start a new conversation
							</h1>
						</div>
					) : (
						// <ChatView openChatGroupId={openChatGroupId} setOpenChatGroupId={setOpenChatGroupId} />
						<p>Chatview</p>
					)}
				</div>
			</main>
		</div>
	);
};

export default Home;
